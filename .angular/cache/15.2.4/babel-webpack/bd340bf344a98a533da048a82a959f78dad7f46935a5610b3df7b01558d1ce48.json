{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nfunction CartComponent_form_4_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 10)(1, \"td\");\n    i0.ɵɵelement(2, \"input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"input\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r3 = ctx.index;\n    i0.ɵɵproperty(\"formGroupName\", i_r3);\n  }\n}\nfunction CartComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\", 1)(1, \"tr\")(2, \"td\")(3, \"label\");\n    i0.ɵɵtext(4, \"Name: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"input\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"td\")(9, \"label\");\n    i0.ɵɵtext(10, \"Address: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelement(12, \"input\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tr\")(14, \"td\")(15, \"label\");\n    i0.ɵɵtext(16, \"Delivery: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵelement(18, \"input\", 4);\n    i0.ɵɵelementStart(19, \"label\");\n    i0.ɵɵtext(20, \"AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 5);\n    i0.ɵɵelementStart(22, \"label\");\n    i0.ɵɵtext(23, \"PM\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(24, \"br\")(25, \"br\");\n    i0.ɵɵelementStart(26, \"table\", 6)(27, \"thead\")(28, \"th\");\n    i0.ɵɵtext(29, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\");\n    i0.ɵɵtext(33, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"th\");\n    i0.ɵɵtext(35, \"Total\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"tbody\", 7);\n    i0.ɵɵtemplate(37, CartComponent_form_4_tr_37_Template, 9, 1, \"tr\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(38, \"br\");\n    i0.ɵɵelementStart(39, \"button\", 9);\n    i0.ɵɵtext(40, \"Cart Out\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(37);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cartArray.controls);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.form.invalid);\n  }\n}\nexport class CartComponent {\n  constructor(fb) {\n    this.fb = fb;\n  }\n  ngOnChanges(changes) {\n    this.cart?.items.forEach(x => this.addFormItem(x));\n  }\n  ngOnInit() {\n    this.cartArray = this.fb.array([]);\n    this.form = this.createForm();\n    console.log(this.cart.items.length);\n  }\n  createForm() {\n    const grp = this.fb.group({\n      name: this.fb.control(\"\", [Validators.required]),\n      address: this.fb.control(\"\", [Validators.required]),\n      delivery: this.fb.control(\"\", [Validators.required, Validators.pattern(\"^[p|a]m$\")]),\n      items: this.cartArray\n    });\n    return grp;\n  }\n  addFormItem(item) {\n    const grp = this.fb.group({\n      name: this.fb.control(item.name, [Validators.required]),\n      price: this.fb.control(item.price, [Validators.required]),\n      quantity: this.fb.control(item.quantity, [Validators.required]),\n      total: this.fb.control(item.quantity * item.price, [Validators.required])\n    });\n    this.cartArray.push(grp);\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  inputs: {\n    cart: \"cart\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 5,\n  vars: 1,\n  consts: [[3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [\"type\", \"text\", \"formControlName\", \"name\"], [\"type\", \"text\", \"formControlName\", \"address\"], [\"type\", \"radio\", \"value\", \"AM\", \"id\", \"AM\", \"formControlName\", \"delivery\"], [\"type\", \"radio\", \"value\", \"PM\", \"id\", \"PM\", \"formControlName\", \"delivery\", \"checked\", \"\"], [\"border\", \"1\"], [\"formArrayName\", \"items\"], [3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 3, \"disabled\"], [3, \"formGroupName\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"name\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"price\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"quantity\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"total\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"br\")(1, \"hr\");\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, CartComponent_form_4_Template, 41, 3, \"form\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.cart123);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","CartComponent","constructor","fb","ngOnChanges","changes","cart","items","forEach","x","addFormItem","ngOnInit","cartArray","array","form","createForm","console","log","length","grp","group","name","control","required","address","delivery","pattern","item","price","quantity","total","push","selectors","inputs","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\theho\\src\\fruit_cart_v3\\src\\app\\cart\\cart.component.ts","C:\\Users\\theho\\src\\fruit_cart_v3\\src\\app\\cart\\cart.component.html"],"sourcesContent":["import { Component, Input, OnInit, Output, OnDestroy, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { Cart, Item } from '../models';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit, OnChanges {\n\n  @Input()\n  cart!: Cart\n  \n  form!: FormGroup\n  cartArray!: FormArray\n  totalPrice!: number\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    this.cart?.items.forEach(x => this.addFormItem(x))\n\n  } \n  ngOnInit(): void {\n    this.cartArray = this.fb.array([])\n    this.form = this.createForm()\n    console.log(this.cart.items.length)\n  }\n\n  private createForm(): FormGroup {\n    const grp = this.fb.group({\n      name: this.fb.control<string>(\"\", [ Validators.required ]),\n      address: this.fb.control<string>(\"\", [ Validators.required ]),\n      delivery: this.fb.control<string>(\"\", [ Validators.required, Validators.pattern(\"^[p|a]m$\") ]),\n      items: this.cartArray\n    })\n\n    return grp;\n  }\n\n  addFormItem(item: Item) {\n\n    const grp = this.fb.group({\n      name: this.fb.control<string>(item.name, [Validators.required]),\n      price: this.fb.control<number>(item.price, [Validators.required]),\n      quantity: this.fb.control<number>(item.quantity, [Validators.required]),\n      total: this.fb.control<number>(item.quantity * item.price , [Validators.required])\n    \n    })\n    this.cartArray.push(grp)\n  }\n}\n","<br>\n<hr>\n<h2>Cart</h2>\n\n<form [formGroup]=\"form\" *ngIf=\"cart123\"> \n    <tr>\n        <td>\n            <label>Name: </label>\n        </td>\n        <td>\n            <input type=\"text\" formControlName=\"name\">\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label>Address: </label>\n        </td>\n        <td>\n            <input type=\"text\" formControlName=\"address\">\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label>Delivery: </label>\n        </td>\n        <td>\n            <input type=\"radio\" value=\"AM\" id=\"AM\" formControlName=\"delivery\">\n            <label>AM</label>\n            <input type=\"radio\" value=\"PM\" id=\"PM\"  formControlName=\"delivery\" checked>\n            <label>PM</label>\n        </td>\n    </tr>\n    <br>\n    <br>\n\n    <table border=\"1\">\n        <thead>\n            <th>Name</th>\n            <th>Price</th>\n            <th>Quantity</th>\n            <th>Total</th>\n        </thead>\n        <tbody formArrayName=\"items\">\n            <tr *ngFor = \"let row of cartArray.controls; let i = index\" [formGroupName]=\"i\">\n                <td><input type=\"text\" readonly formControlName=\"name\"></td>\n                <td><input type=\"text\" readonly formControlName=\"price\"></td>\n                <td><input type=\"text\" readonly formControlName=\"quantity\"></td>\n                <td><input type=\"text\" readonly formControlName=\"total\"></td>\n            </tr>\n        </tbody>\n    </table>\n    <br>\n    <button type=\"submit\" [disabled]=\"form.invalid\">Cart Out</button>\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}