{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nfunction CartComponent_form_4_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Your cart is empty.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CartComponent_form_4_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 11)(1, \"td\");\n    i0.ɵɵelement(2, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"input\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    i0.ɵɵproperty(\"formGroupName\", i_r4);\n  }\n}\nfunction CartComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 1);\n    i0.ɵɵlistener(\"ngSubmit\", function CartComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.processForm());\n    });\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\")(3, \"label\");\n    i0.ɵɵtext(4, \"Name: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"input\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"td\")(9, \"label\");\n    i0.ɵɵtext(10, \"Address: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelement(12, \"input\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tr\")(14, \"td\")(15, \"label\");\n    i0.ɵɵtext(16, \"Delivery: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵelement(18, \"input\", 4);\n    i0.ɵɵelementStart(19, \"label\");\n    i0.ɵɵtext(20, \"AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 5);\n    i0.ɵɵelementStart(22, \"label\");\n    i0.ɵɵtext(23, \"PM\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(24, \"br\")(25, \"br\");\n    i0.ɵɵelementStart(26, \"table\", 6)(27, \"thead\")(28, \"th\");\n    i0.ɵɵtext(29, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\");\n    i0.ɵɵtext(33, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"th\");\n    i0.ɵɵtext(35, \"Total\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(36, CartComponent_form_4_div_36_Template, 3, 0, \"div\", 7);\n    i0.ɵɵelementStart(37, \"tbody\", 8);\n    i0.ɵɵtemplate(38, CartComponent_form_4_tr_38_Template, 9, 1, \"tr\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(39, \"br\");\n    i0.ɵɵelementStart(40, \"button\", 10);\n    i0.ɵɵtext(41, \"Cart Out\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(42, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(36);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.cart123 == null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cartArray.controls);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.form.invalid);\n  }\n}\nexport class CartComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.formSubmitted = new Subject();\n  }\n  ngOnChanges(changes) {\n    if (this.cartArray !== undefined) this.cartArray.clear();\n    this.cart123?.items.forEach(x => this.addFormItem(x));\n  }\n  ngOnInit() {\n    this.cartArray = this.fb.array([]);\n    this.form = this.createForm();\n    console.log(this.cart123.items);\n  }\n  createForm() {\n    const grp = this.fb.group({\n      name: this.fb.control(\"\", [Validators.required]),\n      address: this.fb.control(\"\", [Validators.required]),\n      delivery: this.fb.control(\"\", [Validators.required, Validators.pattern(\"^[P|A]M$\")]),\n      items: this.cartArray\n    });\n    return grp;\n  }\n  addFormItem(item) {\n    const grp = this.fb.group({\n      name: this.fb.control(item.name, [Validators.required]),\n      price: this.fb.control(item.price, [Validators.required]),\n      quantity: this.fb.control(item.quantity, [Validators.required]),\n      total: this.fb.control(item.quantity * item.price, [Validators.required])\n    });\n    this.cartArray.push(grp);\n  }\n  processForm() {\n    this.formSubmitted.next(true);\n    console.log(this.cart123.id);\n    this.form.reset();\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  inputs: {\n    cart123: \"cart123\"\n  },\n  outputs: {\n    formSubmitted: \"formSubmitted\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 5,\n  vars: 1,\n  consts: [[3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"formControlName\", \"name\"], [\"type\", \"text\", \"formControlName\", \"address\"], [\"type\", \"radio\", \"value\", \"AM\", \"id\", \"AM\", \"formControlName\", \"delivery\"], [\"type\", \"radio\", \"value\", \"PM\", \"id\", \"PM\", \"formControlName\", \"delivery\", \"checked\", \"\"], [\"border\", \"1\"], [4, \"ngIf\"], [\"formArrayName\", \"items\"], [3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 3, \"disabled\"], [3, \"formGroupName\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"name\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"price\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"quantity\"], [\"type\", \"text\", \"readonly\", \"\", \"formControlName\", \"total\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"br\")(1, \"hr\");\n      i0.ɵɵelementStart(2, \"h2\");\n      i0.ɵɵtext(3, \"Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, CartComponent_form_4_Template, 43, 4, \"form\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.cart123 !== null);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAiCA,UAAU,QAAmB,gBAAgB;AAC9E,SAASC,OAAO,QAAQ,MAAM;;;;;;IC2CtBC,2BAA8B;IACvBA,mCAAmB;IAAAA,iBAAI;;;;;IAI1BA,8BAAgF;IACxEA,4BAAmD;IAAAA,iBAAK;IAC5DA,0BAAI;IAAAA,4BAAoD;IAAAA,iBAAK;IAC7DA,0BAAI;IAAAA,4BAAuD;IAAAA,iBAAK;IAChEA,0BAAI;IAAAA,4BAAoD;IAAAA,iBAAK;;;;IAJLA,oCAAmB;;;;;;IA5C3FA,+BAA8E;IAArDA;MAAAA;MAAA;MAAA,OAAaA,mCAAa;IAAA,EAAC;IAChDA,0BAAI;IAEWA,sBAAM;IAAAA,iBAAQ;IAEzBA,0BAAI;IACAA,2BAA0C;IAC9CA,iBAAK;IAETA,0BAAI;IAEWA,0BAAS;IAAAA,iBAAQ;IAE5BA,2BAAI;IACAA,4BAA6C;IACjDA,iBAAK;IAETA,2BAAI;IAEWA,2BAAU;IAAAA,iBAAQ;IAE7BA,2BAAI;IACAA,4BAAkE;IAClEA,8BAAO;IAAAA,mBAAE;IAAAA,iBAAQ;IACjBA,4BAA2E;IAC3EA,8BAAO;IAAAA,mBAAE;IAAAA,iBAAQ;IAGzBA,sBAAI;IAGJA,iCAAkB;IAENA,qBAAI;IAAAA,iBAAK;IACbA,2BAAI;IAAAA,sBAAK;IAAAA,iBAAK;IACdA,2BAAI;IAAAA,yBAAQ;IAAAA,iBAAK;IACjBA,2BAAI;IAAAA,sBAAK;IAAAA,iBAAK;IAGlBA,uEAEM;IAENA,iCAA6B;IACzBA,qEAKK;IACTA,iBAAQ;IAEZA,sBAAI;IACJA,mCAAgD;IAAAA,yBAAQ;IAAAA,iBAAS;IACjEA,sBAAI;IAERA,iBAAO;;;;IAxDDA,uCAAkB;IAuCVA,gBAAqB;IAArBA,6CAAqB;IAKDA,eAAuB;IAAvBA,mDAAuB;IAS/BA,eAAyB;IAAzBA,8CAAyB;;;ADjDnD,OAAM,MAAOC,aAAa;EAYxBC,YAAoBC,EAAe;IAAf,OAAE,GAAFA,EAAE;IANtB,kBAAa,GAAG,IAAIJ,OAAO,EAAW;EAMA;EAEtCK,WAAW,CAACC,OAAsB;IAEhC,IAAG,IAAI,CAACC,SAAS,KAAIC,SAAS,EAAE,IAAI,CAACD,SAAS,CAACE,KAAK,EAAE;IAEtD,IAAI,CAACC,OAAO,EAAEC,KAAK,CAACC,OAAO,CAACC,CAAC,IAAI,IAAI,CAACC,WAAW,CAACD,CAAC,CAAC,CAAC;EAEvD;EACAE,QAAQ;IACN,IAAI,CAACR,SAAS,GAAG,IAAI,CAACH,EAAE,CAACY,KAAK,CAAC,EAAE,CAAC;IAClC,IAAI,CAACC,IAAI,GAAG,IAAI,CAACC,UAAU,EAAE;IAC7BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,OAAO,CAACC,KAAK,CAAC;EACjC;EAEQO,UAAU;IAChB,MAAMG,GAAG,GAAG,IAAI,CAACjB,EAAE,CAACkB,KAAK,CAAC;MACxBC,IAAI,EAAE,IAAI,CAACnB,EAAE,CAACoB,OAAO,CAAS,EAAE,EAAE,CAAEzB,UAAU,CAAC0B,QAAQ,CAAE,CAAC;MAC1DC,OAAO,EAAE,IAAI,CAACtB,EAAE,CAACoB,OAAO,CAAS,EAAE,EAAE,CAAEzB,UAAU,CAAC0B,QAAQ,CAAE,CAAC;MAC7DE,QAAQ,EAAE,IAAI,CAACvB,EAAE,CAACoB,OAAO,CAAS,EAAE,EAAE,CAAEzB,UAAU,CAAC0B,QAAQ,EAAE1B,UAAU,CAAC6B,OAAO,CAAC,UAAU,CAAC,CAAE,CAAC;MAC9FjB,KAAK,EAAE,IAAI,CAACJ;KACb,CAAC;IAEF,OAAOc,GAAG;EACZ;EAEAP,WAAW,CAACe,IAAU;IAEpB,MAAMR,GAAG,GAAG,IAAI,CAACjB,EAAE,CAACkB,KAAK,CAAC;MACxBC,IAAI,EAAE,IAAI,CAACnB,EAAE,CAACoB,OAAO,CAASK,IAAI,CAACN,IAAI,EAAE,CAACxB,UAAU,CAAC0B,QAAQ,CAAC,CAAC;MAC/DK,KAAK,EAAE,IAAI,CAAC1B,EAAE,CAACoB,OAAO,CAASK,IAAI,CAACC,KAAK,EAAE,CAAC/B,UAAU,CAAC0B,QAAQ,CAAC,CAAC;MACjEM,QAAQ,EAAE,IAAI,CAAC3B,EAAE,CAACoB,OAAO,CAASK,IAAI,CAACE,QAAQ,EAAE,CAAChC,UAAU,CAAC0B,QAAQ,CAAC,CAAC;MACvEO,KAAK,EAAE,IAAI,CAAC5B,EAAE,CAACoB,OAAO,CAASK,IAAI,CAACE,QAAQ,GAAGF,IAAI,CAACC,KAAK,EAAG,CAAC/B,UAAU,CAAC0B,QAAQ,CAAC;KAElF,CAAC;IACF,IAAI,CAAClB,SAAS,CAAC0B,IAAI,CAACZ,GAAG,CAAC;EAC1B;EAEAa,WAAW;IACT,IAAI,CAACC,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;IAC7BjB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,OAAO,CAAC2B,EAAE,CAAC;IAC5B,IAAI,CAACpB,IAAI,CAACqB,KAAK,EAAE;EACnB;;AAtDWpC,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAqC;EAAAC;IAAA9B;EAAA;EAAA+B;IAAAN;EAAA;EAAAO;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV1B7C,qBAAI;MAEJA,0BAAI;MAAAA,oBAAI;MAAAA,iBAAK;MAIbA,iEAwDO;;;MAxD+CA,eAAsB;MAAtBA,2CAAsB","names":["Validators","Subject","i0","CartComponent","constructor","fb","ngOnChanges","changes","cartArray","undefined","clear","cart123","items","forEach","x","addFormItem","ngOnInit","array","form","createForm","console","log","grp","group","name","control","required","address","delivery","pattern","item","price","quantity","total","push","processForm","formSubmitted","next","id","reset","selectors","inputs","outputs","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\theho\\src\\Day32\\src\\app\\cart\\cart.component.ts","C:\\Users\\theho\\src\\Day32\\src\\app\\cart\\cart.component.html"],"sourcesContent":["import { Component, Input, OnInit, Output, OnDestroy, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { Cart, Item } from '../models';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit, OnChanges {\n\n  @Input()\n  cart123!: Cart\n  \n  @Output()\n  formSubmitted = new Subject<boolean>();\n\n  form!: FormGroup\n  cartArray!: FormArray\n  totalPrice!: number\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    if(this.cartArray !==undefined) this.cartArray.clear();\n\n    this.cart123?.items.forEach(x => this.addFormItem(x))\n\n  } \n  ngOnInit(): void {\n    this.cartArray = this.fb.array([])\n    this.form = this.createForm()\n    console.log(this.cart123.items)\n  }\n\n  private createForm(): FormGroup {\n    const grp = this.fb.group({\n      name: this.fb.control<string>(\"\", [ Validators.required ]),\n      address: this.fb.control<string>(\"\", [ Validators.required ]),\n      delivery: this.fb.control<string>(\"\", [ Validators.required, Validators.pattern(\"^[P|A]M$\") ]),\n      items: this.cartArray\n    })\n\n    return grp;\n  }\n\n  addFormItem(item: Item) {\n\n    const grp = this.fb.group({\n      name: this.fb.control<string>(item.name, [Validators.required]),\n      price: this.fb.control<number>(item.price, [Validators.required]),\n      quantity: this.fb.control<number>(item.quantity, [Validators.required]),\n      total: this.fb.control<number>(item.quantity * item.price , [Validators.required])\n    \n    })\n    this.cartArray.push(grp)\n  }\n\n  processForm() {\n    this.formSubmitted.next(true)\n    console.log(this.cart123.id)\n    this.form.reset()\n  }\n}\n","<br>\n<hr>\n<h2>Cart</h2>\n\n\n\n<form [formGroup]=\"form\" (ngSubmit)= \"processForm()\" *ngIf=\"cart123 !== null\"> \n    <tr>\n        <td>\n            <label>Name: </label>\n        </td>\n        <td>\n            <input type=\"text\" formControlName=\"name\">\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label>Address: </label>\n        </td>\n        <td>\n            <input type=\"text\" formControlName=\"address\">\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <label>Delivery: </label>\n        </td>\n        <td>\n            <input type=\"radio\" value=\"AM\" id=\"AM\" formControlName=\"delivery\">\n            <label>AM</label>\n            <input type=\"radio\" value=\"PM\" id=\"PM\"  formControlName=\"delivery\" checked>\n            <label>PM</label>\n        </td>\n    </tr>\n    <br>\n    <br>\n\n    <table border=\"1\">\n        <thead>\n            <th>Name</th>\n            <th>Price</th>\n            <th>Quantity</th>\n            <th>Total</th>\n        </thead>\n\n        <div *ngIf=\"cart123 == null \">\n            <p>Your cart is empty.</p>\n        </div>\n        \n        <tbody formArrayName=\"items\">\n            <tr *ngFor = \"let row of cartArray.controls; let i = index\" [formGroupName]=\"i\">\n                <td><input type=\"text\" readonly formControlName=\"name\"></td>\n                <td><input type=\"text\" readonly formControlName=\"price\"></td>\n                <td><input type=\"text\" readonly formControlName=\"quantity\"></td>\n                <td><input type=\"text\" readonly formControlName=\"total\"></td>\n            </tr>\n        </tbody>\n    </table>\n    <br>\n    <button type=\"submit\" [disabled]=\"form.invalid\">Cart Out</button>\n    <br>\n    \n</form>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}