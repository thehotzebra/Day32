{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nlet CartComponent = class CartComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.formSubmitted = new Subject();\n  }\n  ngOnChanges(changes) {\n    if (this.cartArray !== undefined) this.cartArray.clear();\n    this.cart123?.items.forEach(x => this.addFormItem(x));\n  }\n  ngOnInit() {\n    this.cartArray = this.fb.array([]);\n    this.form = this.createForm();\n    console.log(this.cart123.items.length);\n  }\n  createForm() {\n    const grp = this.fb.group({\n      name: this.fb.control(\"\", [Validators.required]),\n      address: this.fb.control(\"\", [Validators.required]),\n      delivery: this.fb.control(\"\", [Validators.required, Validators.pattern(\"^[P|A]M$\")]),\n      items: this.cartArray\n    });\n    return grp;\n  }\n  addFormItem(item) {\n    const grp = this.fb.group({\n      name: this.fb.control(item.name, [Validators.required]),\n      price: this.fb.control(item.price, [Validators.required]),\n      quantity: this.fb.control(item.quantity, [Validators.required]),\n      total: this.fb.control(item.quantity * item.price, [Validators.required])\n    });\n    this.cartArray.push(grp);\n  }\n  processForm() {\n    this.formSubmitted.next(true);\n    console.log(this.cart123.id);\n    this.form.reset();\n  }\n};\n__decorate([Input()], CartComponent.prototype, \"cart123\", void 0);\n__decorate([Output()], CartComponent.prototype, \"formSubmitted\", void 0);\nCartComponent = __decorate([Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})], CartComponent);\nexport { CartComponent };","map":{"version":3,"mappings":"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","names":["Component","Input","Output","Validators","Subject","CartComponent","constructor","fb","ngOnChanges","changes","cartArray","undefined","clear","cart123","items","forEach","x","addFormItem","ngOnInit","array","form","createForm","console","log","length","grp","group","name","control","required","address","delivery","pattern","item","price","quantity","total","push","processForm","formSubmitted","next","id","reset","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\theho\\src\\fruit_cart_v3\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["import { Component, Input, OnInit, Output, OnDestroy, SimpleChanges, OnChanges } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { Cart, Item } from '../models';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit, OnChanges {\n\n  @Input()\n  cart123!: Cart\n  \n  @Output()\n  formSubmitted = new Subject<boolean>();\n\n  form!: FormGroup\n  cartArray!: FormArray\n  totalPrice!: number\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n\n    if(this.cartArray !==undefined) this.cartArray.clear();\n\n    this.cart123?.items.forEach(x => this.addFormItem(x))\n\n  } \n  ngOnInit(): void {\n    this.cartArray = this.fb.array([])\n    this.form = this.createForm()\n    console.log(this.cart123.items.length)\n  }\n\n  private createForm(): FormGroup {\n    const grp = this.fb.group({\n      name: this.fb.control<string>(\"\", [ Validators.required ]),\n      address: this.fb.control<string>(\"\", [ Validators.required ]),\n      delivery: this.fb.control<string>(\"\", [ Validators.required, Validators.pattern(\"^[P|A]M$\") ]),\n      items: this.cartArray\n    })\n\n    return grp;\n  }\n\n  addFormItem(item: Item) {\n\n    const grp = this.fb.group({\n      name: this.fb.control<string>(item.name, [Validators.required]),\n      price: this.fb.control<number>(item.price, [Validators.required]),\n      quantity: this.fb.control<number>(item.quantity, [Validators.required]),\n      total: this.fb.control<number>(item.quantity * item.price , [Validators.required])\n    \n    })\n    this.cartArray.push(grp)\n  }\n\n  processForm() {\n    this.formSubmitted.next(true)\n    console.log(this.cart123.id)\n    this.form.reset()\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}